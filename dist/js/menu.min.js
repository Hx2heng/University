requirejs.config({paths:{jquery:"../lib/js/jquery.min",bootstrap:"../lib/js/bootstrap.min",dad:"../lib/js/jquery.dad.min",mes:"../lib/js/messenger.min",mestf:"../lib/js/messenger-theme-flat"},shim:{bootstrap:{deps:["jquery"]}}}),require(["jquery","menu-control","mes"],function(e,t){function n(t){this.ele=e(t)}n.prototype={create:function(t){this.ele.hide(),this.ele.fadeIn(200),this.ele.find("ul").eq(0).empty();for(var t=t,n=[],i=0;i<t.length;i++)0==t[i].pId&&n.push(t[i]);for(var i=0;i<n.length;i++)n[i].ele=e('<li class="demo-1-li"><p>'+n[i].text+"</p></li>"),n[i].ul_2=e('<ul class="demo-2-ul"><span class="demo-angle"></span></div>'),n[i].ul_2.li_2=[],n[i].ele.append(n[i].ul_2),this.ele.find("ul").eq(0).append(n[i].ele);for(var i=0;i<t.length;i++)if(1==t[i].pId){var o=t[i].id.toString().charAt(0)-1;n[o].ul_2.li_2.push(t[i])}for(var i=0;i<n.length;i++)for(var a=0;a<n[i].ul_2.li_2.length;a++)n[i].ul_2.li_2[a].ele=e('<li class="demo-2-li"><p>'+n[i].ul_2.li_2[a].text+"</p></li>"),n[i].ul_2.append(n[i].ul_2.li_2[a].ele);this.init()},init:function(){var t=e(".demo-1-ul").children("li").length;e(".demo-1-ul").find(".demo-1-li").eq(0).css({border:"none"}),e(".demo-1-ul").find(".demo-1-li").each(function(){e(this).css({width:100/t+"%"}),e(this).on("click",function(){0!=e(this).find("li").length&&(e(this).siblings().children(".demo-2-ul").hide(),e(this).children(".demo-2-ul").toggle())})}),e(".demo-2-ul").each(function(){e(this).css({top:-e(this).outerHeight()-8+"px"})})}},e(document).ready(function(){function i(){e(".dad").on("mouseenter",function(){e(this).parents(".li-2-content").addClass("dowebok"),e(".dowebok").dad({target:".li-2",placeholder:"移动至这里",draggable:".dad",callback:function(t){e(".dads-children-clone").remove();var n=a.outData();a.setData(n),a.init(),s.create(n)}})}),e(".dad1").on("mouseenter",function(){e(this).parents(".li-1-content").addClass("dowebok"),e(".dowebok").dad({target:".li-1",placeholder:"移动至这里",draggable:".dad1",callback:function(t){e(".dads-children-clone").remove();var n=a.outData();a.setData(n),a.init(),s.create(n)}})}),e(".dad").on("mouseleave",function(){e(".dads-children-clone").remove();var t=a.outData();a.setData(t),a.init()}),e(".dad").on("mousedown",function(){e(".dad1").unbind("mouseenter").unbind("mouseleave"),e(".dad").unbind("mouseenter").unbind("mouseleave")}),e(".dad1").on("mouseleave",function(){var e=a.outData();a.setData(e),a.init()}),e(".dad1").on("mousedown",function(){e(".dad1").unbind("mouseenter").unbind("mouseleave"),e(".dad").unbind("mouseenter").unbind("mouseleave")})}var o=[{id:1,pId:0,type:0,text:"威莱新闻",key:"1",url:"222"},{id:13,pId:1,type:1,text:"新品上市",key:"1",url:""},{id:11,pId:1,type:0,text:"每日新闻",key:"1",url:""},{id:12,pId:1,type:0,text:"公司简介",key:"",url:"http://www.baidu.com"},{id:3,pId:0,type:1,text:"威莱活动",key:"",url:"http://www.baidu.com"},{id:31,pId:1,type:1,text:"消灭细菌",key:"1",url:""},{id:32,pId:1,type:2,text:"威帅拼图",key:"1",url:""},{id:2,pId:0,type:1,text:"会员专区",key:"1",url:""},{id:21,pId:1,type:2,text:"签到",key:"1",url:""},{id:22,pId:1,type:2,text:"会员社区",key:"1",url:""}],a=new t(".setul",{type:[{name:"默认",valt:0},{name:"类型一",valt:1},{name:"类型二",valt:0}],limit:[3,4]},o);a.init();var s=new n(".menu-demo");s.create(a.outData()),a.on("dataChange",function(){var e=a.outData();s.create(e)}),a.on("overlimit1",function(e){Messenger().post({message:"一级菜单最多"+e+"项。",type:"error",hideAfter:4,showCloseButton:!0})}),a.on("overlimit2",function(e){Messenger().post({message:"二级菜单最多"+e+"项。",type:"error",hideAfter:4,showCloseButton:!0})}),e("#reduction").on("click",function(){try{a.setData(o),a.init(),s.create(a.outData()),Messenger().post({message:"还原菜单成功。",type:"success",hideAfter:4,showCloseButton:!0})}catch(e){Messenger().post({message:"还原菜单失败。",type:"error",hideAfter:4,showCloseButton:!0})}}),e("#save").on("click",function(){var e=a.outData();a.setData(e),a.init(),s.create(e),console.log(a.new_data)}),e("#cancel").on("click",function(){}),a.on("init",i),i(),Messenger.options={extraClasses:"messenger-fixed messenger-on-bottom messenger-on-left messenger-theme-flat messenger-user"}})});